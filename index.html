<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swapify - Skill Swapping Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .section-container {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .section-container.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .accordion-item {
            border-bottom: 1px solid #e5e7eb;
        }
        .accordion-header {
            cursor: pointer;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #1f2937;
        }
        .accordion-content {
            display: none;
            padding: 0 1rem 1rem 1rem;
            color: #4b5563;
        }
        .accordion-icon {
            transition: transform 0.3s ease;
        }
        .accordion-item.active .accordion-icon {
            transform: rotate(180deg);
        }
        .treasure-box-modal-content {
            animation: bounceIn 0.8s ease-in-out;
        }
        @keyframes bounceIn {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-20px);
            }
            60% {
                transform: translateY(-10px);
            }
        }
        .certificate-card {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid #a3e635;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        .certificate-card::before {
            content: "üèÜ";
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 4rem;
            opacity: 0.2;
            transform: rotate(20deg);
        }
        /* Theme Styles */
        .theme-default body {
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .theme-default .bg-white { background-color: #fff; }
        .theme-default .bg-gray-100 { background-color: #f3f4f6; }
        .theme-default .bg-gray-50 { background-color: #f9fafb; }
        .theme-default .text-gray-800 { color: #1f2937; }
        .theme-default .text-gray-600 { color: #4b5563; }
        .theme-default .text-white { color: #fff; }

        .theme-dark body {
            background-color: #1f2937;
            color: #d1d5db;
        }
        .theme-dark .bg-white { background-color: #374151; }
        .theme-dark .bg-gray-100 { background-color: #1f2937; }
        .theme-dark .bg-gray-50 { background-color: #4b5563; }
        .theme-dark .text-gray-800 { color: #f9fafb; }
        .theme-dark .text-gray-600 { color: #d1d5db; }
        .theme-dark .text-white { color: #fff; }

        .theme-ocean body {
            background-color: #e0f7fa;
            color: #00796b;
        }
        .theme-ocean .bg-white { background-color: #b2ebf2; }
        .theme-ocean .bg-gray-100 { background-color: #e0f7fa; }
        .theme-ocean .bg-gray-50 { background-color: #e0f2f7; }
        .theme-ocean .text-gray-800 { color: #004d40; }
        .theme-ocean .text-gray-600 { color: #006064; }
        .theme-ocean .text-white { color: #fff; }

    </style>
</head>
<body class="bg-gray-100 text-gray-800 theme-default">

    <!-- Global Navigation -->
    <header class="bg-white shadow-sm p-4 sticky top-0 z-50">
        <nav class="container mx-auto flex justify-between items-center">
            <h1 onclick="showPage('home')" class="text-2xl font-bold text-indigo-600 cursor-pointer">Swapify</h1>
            <div class="flex items-center space-x-4">
                <button onclick="showPage('dashboard')" class="text-gray-600 hover:text-indigo-600 transition">Dashboard</button>
                <button onclick="showPage('catalog')" class="text-gray-600 hover:text-indigo-600 transition">Catalog</button>
                <button onclick="showPage('leaderboard')" class="text-gray-600 hover:text-indigo-600 transition">Leaderboard</button>
                <button onclick="showPage('hall-of-fame')" class="text-gray-600 hover:text-indigo-600 transition">Hall of Fame</button>
                <button onclick="showPage('rewards')" class="text-gray-600 hover:text-indigo-600 transition">Rewards</button>
                <button onclick="showPage('subscription')" class="text-gray-600 hover:text-indigo-600 transition">Premium</button>
                <button onclick="showPage('faq')" class="text-gray-600 hover:text-indigo-600 transition">FAQ</button>
                <button onclick="showAuthModal()" class="bg-indigo-600 text-white font-medium py-2 px-4 rounded-full hover:bg-indigo-700 transition">Sign In</button>
            </div>
        </nav>
    </header>

    <!-- Main Content Container -->
    <main class="container mx-auto p-4 md:p-8 space-y-12">

        <!-- 1. Landing Page (Home) -->
        <section id="home" class="section-container active">
            <div class="bg-indigo-600 text-white rounded-3xl p-8 md:p-16 text-center shadow-lg">
                <h2 class="text-4xl md:text-6xl font-extrabold mb-4">Swap Skills. Grow Together.</h2>
                <p class="text-lg md:text-xl mb-8 opacity-90 max-w-2xl mx-auto">
                    A skill-swapping platform where you can learn, teach, and earn rewards in a gamified environment.
                </p>
                <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <button onclick="showAuthModal()" class="bg-white text-indigo-600 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-100 transition transform hover:scale-105">Join Free</button>
                    <button onclick="showPage('subscription')" class="bg-indigo-800 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-900 transition transform hover:scale-105">Go Premium</button>
                </div>
            </div>
            
            <div class="bg-yellow-400 text-yellow-900 rounded-2xl p-6 md:p-8 mt-8 text-center shadow-lg">
                <p class="font-semibold text-lg md:text-xl">
                    üî• Unlock unlimited swaps, exclusive mentors, and priority matches with Premium.
                </p>
            </div>

            <!-- New Success Story Tile -->
            <div class="bg-green-100 text-green-800 rounded-2xl p-6 md:p-8 text-center shadow-lg mt-8">
                <h3 class="text-2xl font-bold mb-2">Have a success story?</h3>
                <p class="text-lg mb-4">Share what you've achieved through a skill swap and inspire others!</p>
                <a href="https://example.com/share-story" target="_blank" class="bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-green-700 transition transform hover:scale-105">
                    Share Your Story
                </a>
            </div>
        </section>

        <!-- 3. Dashboard -->
        <section id="dashboard" class="section-container">
            <h2 class="text-3xl font-bold text-center mb-6">Your Dashboard</h2>
            <div class="grid md:grid-cols-3 gap-6">
                <!-- User Stats -->
                <div class="bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-xl font-bold mb-4">Your Progress</h3>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2">
                            <span class="text-yellow-500 text-3xl">ü™ô</span>
                            <p class="text-lg font-semibold">You have <span id="user-coins">1,245</span> coins</p>
                            <button onclick="showPage('rewards')" class="ml-auto bg-green-500 text-white text-sm font-semibold py-1 px-3 rounded-full hover:bg-green-600 transition">Go to Rewards Store</button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-red-500 text-3xl">üî•</span>
                            <p class="text-lg font-semibold"><span id="user-swaps">0</span> Swaps Completed</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-blue-500 text-3xl">üèÜ</span>
                            <p class="text-lg font-semibold">Leaderboard Rank: #12</p>
                            <button onclick="showPage('leaderboard')" class="ml-auto text-sm bg-blue-500 text-white font-semibold py-1 px-3 rounded-full hover:bg-blue-600 transition">View Full</button>
                        </div>
                    </div>
                </div>

                <!-- Featured Swaps & Daily Missions -->
                <div class="md:col-span-2 bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-xl font-bold mb-4">Daily Missions</h3>
                    <div class="space-y-4 mb-6">
                        <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Log in today!</h4>
                                <p class="text-sm text-gray-500">Earn 5 coins for your daily login.</p>
                            </div>
                            <button class="bg-green-500 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-green-600 transition">Claim</button>
                        </div>
                        <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Complete 1 Swap</h4>
                                <p class="text-sm text-gray-500">Complete a swap to earn 50 bonus coins.</p>
                            </div>
                            <button class="bg-green-500 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-green-600 transition">Go to Catalog</button>
                        </div>
                        <div class="text-center">
                            <button onclick="getNewMissionIdea()" class="bg-purple-500 text-white font-bold py-2 px-6 rounded-full hover:bg-purple-600 transition">
                                ‚ú® Get New Mission Idea ‚ú®
                            </button>
                        </div>
                    </div>
                    <div class="text-center mb-6">
                        <button onclick="showSpinWheelModal()" class="bg-yellow-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-600 transition transform hover:scale-105">
                            Spin the Wheel üé°
                        </button>
                    </div>

                    <h3 class="text-xl font-bold mt-8 mb-4">Suggested Swaps for You</h3>
                    <div class="space-y-4">
                        <!-- Swap Card 1 -->
                        <div class="bg-gray-50 rounded-xl p-4 flex items-center space-x-4">
                            <img src="https://placehold.co/64x64/E2E8F0/1A202C?text=JS" alt="Skill Icon" class="rounded-lg">
                            <div>
                                <h4 class="font-semibold">Learn JavaScript from Jane Doe</h4>
                                <p class="text-sm text-gray-500">I can teach you front-end dev skills in exchange for design feedback.</p>
                            </div>
                            <button class="ml-auto bg-indigo-500 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-indigo-600 transition">Request Swap</button>
                        </div>
                        <!-- Swap Card 2 -->
                        <div class="bg-gray-50 rounded-xl p-4 flex items-center space-x-4">
                            <img src="https://placehold.co/64x64/E2E8F0/1A202C?text=Yoga" alt="Skill Icon" class="rounded-lg">
                            <div>
                                <h4 class="font-semibold">Practice Yoga with Mark T.</h4>
                                <p class="text-sm text-gray-500">I can guide you through a yoga session in exchange for photography tips.</p>
                            </div>
                            <button class="ml-auto bg-indigo-500 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-indigo-600 transition">Request Swap</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-indigo-200 text-indigo-800 rounded-2xl p-6 text-center mt-6 shadow-lg">
                <p class="font-semibold text-lg">
                    Upgrade to Premium to unlock unlimited swaps & pro mentors.
                </p>
                <button onclick="showPage('subscription')" class="mt-4 bg-indigo-600 text-white font-bold py-2 px-6 rounded-full hover:bg-indigo-700 transition">Upgrade Now</button>
            </div>

            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 mt-8">
                <button onclick="showHostModal()" class="bg-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-purple-700 transition transform hover:scale-105">
                    Host a Session
                </button>
                <button onclick="renderMyProfile()" class="bg-gray-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-700 transition transform hover:scale-105">
                    View My Profile
                </button>
            </div>
        </section>

        <!-- 4. Skill Catalog -->
        <section id="catalog" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2">Skill Catalog</h2>
                    <p class="text-lg text-gray-600">Find the perfect mentor or a new skill to learn.</p>
                </div>

                <!-- Skill Filter Buttons -->
                <div class="flex flex-wrap justify-center gap-2 mb-4">
                    <button onclick="renderInstructors('All')" class="bg-indigo-600 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-indigo-700 transition">All Skills</button>
                    <button onclick="renderInstructors('Python')" class="bg-gray-200 text-gray-800 text-sm font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition">Python</button>
                    <button onclick="renderInstructors('Yoga')" class="bg-gray-200 text-gray-800 text-sm font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition">Yoga</button>
                    <button onclick="renderInstructors('Photography')" class="bg-gray-200 text-gray-800 text-sm font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition">Photography</button>
                    <button onclick="renderInstructors('UI/UX Design')" class="bg-gray-200 text-gray-800 text-sm font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition">UI/UX Design</button>
                </div>

                <!-- Advanced Filters -->
                <div class="bg-gray-100 rounded-xl p-4 mb-6">
                    <h3 class="font-bold text-gray-800 mb-2">Advanced Filters (Premium)</h3>
                    <div class="flex flex-wrap items-center gap-4">
                        <label class="flex items-center space-x-2 text-sm text-gray-600">
                            <input type="checkbox" onchange="renderInstructors('All')" id="verified-filter" class="rounded text-indigo-600">
                            <span>Verified Instructors Only</span>
                        </label>
                        <select onchange="renderInstructors('All')" id="experience-filter" class="p-2 rounded-lg text-sm">
                            <option value="">All Experience</option>
                            <option value="Beginner">Beginner</option>
                            <option value="Intermediate">Intermediate</option>
                            <option value="Expert">Expert</option>
                        </select>
                    </div>
                </div>

                <!-- Instructors List -->
                <div id="instructors-list" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Instructor cards will be dynamically inserted here -->
                </div>
            </div>
        </section>
        
        <!-- My Profile Page -->
        <section id="my-profile-page" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-6">Your Profile</h2>
                <div class="text-center">
                    <img src="https://placehold.co/150x150/E2E8F0/1A202C?text=You" alt="User" class="mx-auto rounded-full w-32 h-32 object-cover border-4 border-indigo-400">
                    <h3 class="text-2xl font-bold mt-4">You</h3>
                    <p class="text-gray-600 mt-2">The Ultimate Swapper</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-4 mt-6 text-center">
                    <h4 class="text-xl font-bold mb-2">Your Stats</h4>
                    <div class="flex justify-around items-center space-x-4">
                        <div>
                            <p class="text-lg font-bold text-yellow-500" id="profile-coins">1,245</p>
                            <p class="text-sm text-gray-500">Coins</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-red-500" id="profile-swaps">0</p>
                            <p class="text-sm text-gray-500">Swaps</p>
                        </div>
                    </div>
                </div>

                <div class="mt-6">
                    <h4 class="text-xl font-bold mb-4">Your Certificates</h4>
                    <div id="my-certificates-list" class="grid md:grid-cols-2 gap-4">
                        <!-- Certificates will be dynamically inserted here -->
                    </div>
                    <p id="no-certificates-msg" class="text-gray-500 text-center mt-4 hidden">You haven't earned any certificates yet.</p>
                </div>

                <div class="mt-8">
                    <h4 class="text-xl font-bold mb-4">Select a Theme</h4>
                    <div class="flex justify-center space-x-4">
                        <button onclick="setTheme('default')" class="w-16 h-16 rounded-full bg-indigo-600 border-4 border-transparent hover:border-indigo-800 transition shadow-lg flex items-center justify-center text-white">
                           <span class="text-sm font-semibold">Def</span>
                        </button>
                        <button onclick="setTheme('dark')" class="w-16 h-16 rounded-full bg-gray-800 border-4 border-transparent hover:border-gray-900 transition shadow-lg flex items-center justify-center text-white">
                           <span class="text-sm font-semibold">Dark</span>
                        </button>
                        <button onclick="setTheme('ocean')" class="w-16 h-16 rounded-full bg-blue-500 border-4 border-transparent hover:border-blue-700 transition shadow-lg flex items-center justify-center text-white">
                           <span class="text-sm font-semibold">Ocean</span>
                        </button>
                    </div>
                </div>

            </div>
        </section>
        
        <!-- Other Profile Page -->
        <section id="profile-page" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto">
                <button onclick="showPage('catalog')" class="flex items-center text-gray-600 hover:text-indigo-600 transition mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    Back to Catalog
                </button>
                <div id="profile-content">
                    <!-- Profile content will be dynamically generated here -->
                </div>
            </div>
        </section>
        
        <!-- 6. Group Session Page -->
        <section id="group-page" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-4xl mx-auto">
                <button onclick="showPage('catalog')" class="flex items-center text-gray-600 hover:text-indigo-600 transition mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    Back to Catalog
                </button>
                <div id="group-content">
                    <!-- Group content will be dynamically generated here -->
                </div>
            </div>
        </section>
        
        <!-- 6. Chat & Communication Page -->
        <section id="chat-page" class="section-container">
            <div class="bg-white rounded-3xl shadow-lg flex flex-col h-[70vh] max-w-2xl mx-auto">
                <!-- Chat Header -->
                <div class="bg-indigo-600 text-white p-4 flex items-center justify-between rounded-t-3xl shadow-md">
                    <button onclick="showPage('catalog')" class="flex items-center text-white hover:text-indigo-200 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                        Back
                    </button>
                    <h3 id="chat-partner-name" class="text-xl font-bold text-center flex-grow"></h3>
                    <div class="flex space-x-2">
                        <button class="p-2 rounded-full hover:bg-indigo-700 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                        </button>
                        <button class="p-2 rounded-full hover:bg-indigo-700 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Chat Messages Display -->
                <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-4">
                    <!-- Messages will be added dynamically here -->
                </div>
                
                <!-- Chat Input and Actions -->
                <div class="p-4 bg-gray-50 rounded-b-3xl flex flex-col space-y-2">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="Type a message..." class="flex-grow p-3 rounded-full bg-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400">
                        <button class="bg-indigo-600 text-white font-semibold p-3 rounded-full hover:bg-indigo-700 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                            </svg>
                        </button>
                    </div>
                    <div class="flex justify-between space-x-2">
                        <button onclick="showRateModal()" class="bg-yellow-500 text-white text-sm font-bold py-2 px-4 rounded-full hover:bg-yellow-600 transition flex-1">Rate Swap</button>
                        <button onclick="completeSwap()" class="bg-green-500 text-white text-sm font-bold py-2 px-4 rounded-full hover:bg-green-600 transition flex-1">Complete Swap</button>
                        <button onclick="takeTest()" id="take-test-btn" class="bg-blue-500 text-white text-sm font-bold py-2 px-4 rounded-full hover:bg-blue-600 transition flex-1" style="display: none;">Take Skill Test</button>
                        <button onclick="showLessonPlanModal()" id="lesson-plan-btn" class="bg-fuchsia-500 text-white text-sm font-bold py-2 px-4 rounded-full hover:bg-fuchsia-600 transition flex-1" style="display: none;">‚ú® Get Lesson Plan ‚ú®</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 7. Leaderboard Page -->
        <section id="leaderboard" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-6">üèÜ Leaderboard</h2>
                <div class="flex justify-between font-bold text-gray-600 border-b pb-2 mb-4">
                    <span>Rank</span>
                    <span>Name</span>
                    <span>Coins</span>
                </div>
                <div id="leaderboard-list">
                    <!-- Leaderboard items will be inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Hall of Fame Section -->
        <section id="hall-of-fame" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-6">üëë Hall of Fame</h2>
                <p class="text-center text-gray-600 mb-8">Celebrating the most impactful swaps and top contributors in our community.</p>

                <div class="space-y-8">
                    <!-- Swap of the Year -->
                    <div class="bg-yellow-100 border-l-4 border-yellow-400 p-6 rounded-xl shadow-md">
                        <h3 class="text-2xl font-bold text-yellow-800 mb-2">Swap of the Year 2024</h3>
                        <p class="text-lg text-yellow-700"><b>Maria S.</b> (Photography) & <b>Alex F.</b> (Web Development)</p>
                        <p class="text-sm mt-2 text-yellow-800">Maria helped Alex create a professional photography portfolio website, and in return, Alex taught her how to use Python for photo organization and automation.</p>
                    </div>
                    
                    <!-- Swap of the Month -->
                    <div class="bg-blue-100 border-l-4 border-blue-400 p-6 rounded-xl shadow-md">
                        <h3 class="text-2xl font-bold text-blue-800 mb-2">Swap of the Month</h3>
                        <p class="text-lg text-blue-700"><b>Tom P.</b> (Public Speaking) & <b>Lena B.</b> (Content Writing)</p>
                        <p class="text-sm mt-2 text-blue-800">Tom mentored Lena for a presentation, and she helped him write compelling content for his website.</p>
                    </div>
                    
                    <!-- Swap of the Week -->
                    <div class="bg-green-100 border-l-4 border-green-400 p-6 rounded-xl shadow-md">
                        <h3 class="text-2xl font-bold text-green-800 mb-2">Swap of the Week</h3>
                        <p class="text-lg text-green-700"><b>Sofia D.</b> (Graphic Design) & <b>Jake R.</b> (Video Editing)</p>
                        <p class="text-sm mt-2 text-green-800">Sofia designed stunning visual assets for Jake's YouTube channel, and Jake created an impressive video reel of her design work.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 9. Rewards Store -->
        <section id="rewards" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2">Swap. Earn. Redeem.</h2>
                    <p class="text-lg text-gray-600">You have <span class="text-yellow-500 font-bold" id="rewards-coins-display">1,245</span> Coins ü™ô</p>
                    <button onclick="showPage('dashboard')" class="mt-2 text-indigo-600 font-semibold hover:underline">Earn More Coins</button>
                </div>
                
                <!-- Tabs for Rewards -->
                <div class="flex justify-center border-b border-gray-200 mb-6">
                    <button onclick="showRewardsTab('free')" class="tab-button active py-3 px-6 text-lg font-semibold text-indigo-600 border-b-2 border-indigo-600 transition duration-300">Free Rewards</button>
                    <button onclick="showRewardsTab('premium')" class="tab-button py-3 px-6 text-lg font-semibold text-gray-600 hover:text-indigo-600 transition duration-300">Premium Rewards</button>
                    <button onclick="showRewardsTab('sponsored')" class="tab-button py-3 px-6 text-lg font-semibold text-gray-600 hover:text-indigo-600 transition duration-300">Sponsored Offers</button>
                </div>
                
                <!-- Rewards Content -->
                <div id="free-rewards-tab" class="rewards-tab active grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Free Reward Item -->
                    <div class="bg-gray-50 rounded-2xl p-6 text-center shadow-md">
                        <img src="https://placehold.co/150x150/E2E8F0/1A202C?text=Spin" alt="Reward" class="mx-auto rounded-lg mb-4">
                        <h4 class="font-bold text-lg">Extra Spin on the Wheel</h4>
                        <p class="text-sm text-gray-500 mb-4">Add another spin to your account.</p>
                        <p class="text-xl font-bold text-yellow-600">250 Coins</p>
                        <button class="mt-4 bg-yellow-500 text-white font-bold py-2 px-6 rounded-full hover:bg-yellow-600 transition">Redeem Now</button>
                    </div>
                </div>
                
                <div id="premium-rewards-tab" class="rewards-tab hidden grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Premium Reward Item -->
                    <div class="bg-gray-50 rounded-2xl p-6 text-center shadow-md border-2 border-yellow-400">
                        <img src="https://placehold.co/150x150/E2E8F0/1A202C?text=Laptop" alt="Premium Reward" class="mx-auto rounded-lg mb-4">
                        <h4 class="font-bold text-lg">Laptop</h4>
                        <p class="text-sm text-gray-500 mb-4">Redeem a brand new laptop.</p>
                        <p class="text-xl font-bold text-yellow-600">80,000 Coins</p>
                        <button class="mt-4 bg-yellow-500 text-white font-bold py-2 px-6 rounded-full hover:bg-yellow-600 transition">Redeem Now</button>
                    </div>
                </div>
                
                <div id="sponsored-rewards-tab" class="rewards-tab hidden grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Sponsored Reward Item -->
                    <div class="bg-gray-50 rounded-2xl p-6 text-center shadow-md">
                        <img src="https://placehold.co/150x150/E2E8F0/1A202C?text=JBL" alt="Sponsored Reward" class="mx-auto rounded-lg mb-4">
                        <h4 class="font-bold text-lg">JBL Headphones</h4>
                        <p class="text-sm text-gray-500 mb-4">Sponsored by JBL.</p>
                        <p class="text-xl font-bold text-yellow-600">10,000 Coins</p>
                        <button class="mt-4 bg-yellow-500 text-white font-bold py-2 px-6 rounded-full hover:bg-yellow-600 transition">Redeem Now</button>
                    </div>
                </div>
                
                <div class="bg-indigo-100 text-indigo-800 rounded-xl p-4 text-center mt-6">
                    <p class="text-sm md:text-base font-semibold">
                        Upgrade to Premium for Double Coins + Bigger Rewards.
                    </p>
                </div>
            </div>
        </section>

        <!-- 10. Subscription Page -->
        <section id="subscription" class="section-container">
            <h2 class="text-3xl font-bold text-center mb-6">Choose Your Plan</h2>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <!-- Free Plan -->
                <div class="bg-white rounded-3xl p-8 shadow-lg text-center border-4 border-transparent hover:border-indigo-400 transition transform hover:scale-105">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Free Plan</h3>
                    <p class="text-lg text-gray-500">For casual swappers</p>
                    <div class="my-6">
                        <span class="text-4xl font-extrabold text-indigo-600">‚Çπ0</span>
                        <span class="text-sm text-gray-500">/ forever</span>
                    </div>
                    <ul class="text-left space-y-2 mb-8 text-gray-600">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Up to 4 sessions per week</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Limited daily searches</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Earn coins</li>
                        <li class="flex items-center"><span class="text-red-500 mr-2">‚ùå</span> No verified badge</li>
                    </ul>
                    <button class="bg-gray-200 text-gray-600 font-bold py-3 px-8 rounded-full cursor-not-allowed">Current Plan</button>
                </div>

                <!-- Premium Plan -->
                <div class="bg-white rounded-3xl p-8 shadow-lg text-center border-4 border-yellow-400 relative hover:border-yellow-500 transition transform hover:scale-105">
                    <span class="absolute top-0 right-0 -mt-3 -mr-3 bg-yellow-400 text-yellow-900 text-xs font-bold py-1 px-4 rounded-full shadow-lg">BEST VALUE</span>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Premium Plan</h3>
                    <p class="text-lg text-gray-500">For pro swappers</p>
                    <div class="my-6">
                        <span class="text-4xl font-extrabold text-indigo-600">‚Çπ499</span>
                        <span class="text-sm text-gray-500">/ month</span>
                        <p class="text-sm text-gray-500">or ‚Çπ4,999/year</p>
                    </div>
                    <ul class="text-left space-y-2 mb-8 text-gray-600">
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Unlimited swaps</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Pro features (HD video, file sharing)</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Verified badge ‚úÖ</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Priority matches</li>
                        <li class="flex items-center"><span class="text-green-500 mr-2">‚úÖ</span> Double coin earnings</li>
                    </ul>
                    <button class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition transform hover:scale-105">Upgrade Now</button>
                    <p class="text-sm text-gray-500 mt-2">1-month free trial included</p>
                </div>
            </div>
            <div class="mt-8 text-center text-gray-600">
                <p class="font-semibold mb-2">Payment Options:</p>
                <div class="flex justify-center space-x-4">
                    <img src="https://placehold.co/60x40/E2E8F0/1A202C?text=UPI" alt="UPI" class="rounded-lg">
                    <img src="https://placehold.co/60x40/E2E8F0/1A202C?text=Card" alt="Card" class="rounded-lg">
                    <img src="https://placehold.co/60x40/E2E8F0/1A202C?text=PayPal" alt="PayPal" class="rounded-lg">
                </div>
            </div>
        </section>

        <!-- 11. FAQ Section -->
        <section id="faq" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-6">Frequently Asked Questions</h2>
                <div id="faq-list" class="space-y-4">
                    <!-- FAQ Items will be dynamically generated here -->
                </div>
            </div>
        </section>

        <!-- 12. Skill Test Page -->
        <section id="test-page" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-6">Skill Test: <span id="test-skill-name"></span></h2>
                <div id="test-questions" class="space-y-6">
                    <!-- Test questions will be dynamically generated here -->
                </div>
                <div class="mt-8 text-center">
                    <button onclick="submitTest()" class="bg-green-600 text-white font-bold py-3 px-8 rounded-full hover:bg-green-700 transition">Submit Test</button>
                </div>
            </div>
        </section>

        <!-- 13. Certificate Page -->
        <section id="certificate-page" class="section-container">
            <div class="bg-white rounded-3xl p-8 shadow-lg max-w-2xl mx-auto text-center">
                <h2 class="text-3xl font-bold text-green-600 mb-4">Congratulations!</h2>
                <p class="text-xl text-gray-800 mb-2">You've earned a certificate in:</p>
                <h3 class="text-4xl font-extrabold text-indigo-600 mb-6" id="certificate-skill-name"></h3>
                <p class="text-lg text-gray-700 mb-4">Your Score: <span class="font-bold" id="certificate-score"></span>%</p>
                <div class="mt-8">
                    <p class="text-lg font-semibold">Your hard work has been officially recognized by Swapify.</p>
                    <button onclick="showPage('dashboard')" class="mt-6 bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition">Return to Dashboard</button>
                </div>
            </div>
        </section>

    </main>
    
    <!-- Report Modal (hidden by default) -->
    <div id="report-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full relative">
            <button onclick="hideReportModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold text-center mb-6">Report User</h3>
            <p id="report-user-name" class="text-center text-gray-600 mb-4"></p>
            <form id="report-form" class="space-y-4">
                <textarea id="report-details" rows="5" placeholder="Please provide details about your concern..." class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-400"></textarea>
                <button type="submit" class="w-full bg-red-600 text-white font-bold py-3 rounded-xl hover:bg-red-700 transition">Submit Report</button>
            </form>
        </div>
    </div>

    <!-- Rate Swap Modal (hidden by default) -->
    <div id="rate-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full relative text-center">
            <button onclick="hideRateModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold mb-4">Rate Your Swap!</h3>
            <p class="text-gray-600 mb-6">How was your experience with this instructor?</p>
            <div id="star-rating" class="flex justify-center space-x-2 mb-6 text-2xl text-gray-400">
                <button onclick="setRating(1)">‚òÖ</button>
                <button onclick="setRating(2)">‚òÖ</button>
                <button onclick="setRating(3)">‚òÖ</button>
                <button onclick="setRating(4)">‚òÖ</button>
                <button onclick="setRating(5)">‚òÖ</button>
            </div>
            <button onclick="submitRating()" class="w-full bg-yellow-500 text-white font-bold py-3 rounded-xl hover:bg-yellow-600 transition">Submit Rating</button>
        </div>
    </div>
    
    <!-- Spin Wheel Modal (hidden by default) -->
    <div id="spin-wheel-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative">
            <button onclick="hideSpinWheelModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-3xl font-extrabold text-indigo-600 mb-4 text-center">Spin to Win!</h3>
            
            <div class="flex justify-center mb-6">
                
            </div>
            
            <button onclick="spinTheWheel()" class="w-full bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition">Spin</button>
            <p id="spin-result" class="mt-4 text-xl font-bold text-center"></p>
            <button onclick="hideSpinWheelModal()" class="w-full bg-gray-500 text-white font-bold py-3 rounded-full hover:bg-gray-600 transition mt-4">Done</button>
        </div>
    </div>

    <!-- 2. Authentication Modal (hidden by default) -->
    <div id="auth-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full relative">
            <button onclick="hideAuthModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold text-center mb-6">Sign In to Swapify</h3>
            <form class="space-y-4">
                <input type="email" placeholder="Email Address" class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400">
                <input type="password" placeholder="Password" class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400">
                <button type="submit" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition">Sign In</button>
            </form>
            <div class="mt-6 text-center text-gray-500">
                <p>Don't have an account? <a href="#" class="text-indigo-600 font-semibold hover:underline">Sign Up</a></p>
                <p>or</p>
                <button onclick="hideAuthModal(); showPage('dashboard')" class="text-indigo-600 font-semibold hover:underline">Continue as Guest</button>
            </div>
        </div>
    </div>
    
    <!-- Host Session Modal (hidden by default) -->
    <div id="host-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full relative">
            <button onclick="hideHostModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold text-center mb-6">Host a New Session</h3>
            <form id="host-form" class="space-y-4">
                <input type="text" id="host-skill" placeholder="Skill you want to teach (e.g., Python)" class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400">
                <input type="text" id="host-needs" placeholder="Skill you need in return (or 'no skill needed')" class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400">
                <textarea id="host-description" rows="3" placeholder="Describe your session..." class="w-full p-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400"></textarea>
                <button type="submit" class="w-full bg-purple-600 text-white font-bold py-3 rounded-xl hover:bg-purple-700 transition">Create Session</button>
            </form>
        </div>
    </div>

    <!-- Treasure Box Modal (hidden by default) -->
    <div id="treasure-box-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="treasure-box-modal-content bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative text-center">
            <h3 class="text-3xl font-extrabold text-yellow-600 mb-4 animate-pulse">Treasure Box!</h3>
            
            <p class="text-lg text-gray-700 mt-4 mb-2">You opened a box and found...</p>
            <p class="text-4xl font-bold text-yellow-500 mb-4"><span id="treasure-coins-display"></span> Coins!</p>
            <button onclick="hideTreasureBoxModal()" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition mt-4">Awesome!</button>
        </div>
    </div>
    
    <!-- Lesson Plan Modal (hidden by default) -->
    <div id="lesson-plan-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-2xl w-full relative">
            <button onclick="hideLessonPlanModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold text-center mb-6">Generated Lesson Plan</h3>
            <div id="lesson-plan-content" class="prose max-w-none text-gray-800 overflow-y-auto max-h-[60vh] p-4 bg-gray-50 rounded-lg">
                <div class="text-center py-10">
                    <svg class="animate-spin h-8 w-8 text-indigo-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-4 text-gray-500">Generating lesson plan...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mission Idea Modal (hidden by default) -->
    <div id="mission-idea-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full relative">
            <button onclick="hideMissionIdeaModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold text-center mb-4">New Mission Idea</h3>
            <div id="mission-idea-content" class="text-center text-lg text-gray-700">
                <div class="py-10">
                    <svg class="animate-spin h-8 w-8 text-purple-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-4 text-gray-500">Generating idea...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for page navigation and modals -->
    <script>
        // Global state variables
        let userCoins = 1245;
        let userSwaps = 0;
        let userCertificates = [];
        let currentSkill = '';
        let currentGroup = null;
        let currentInstructor = null;

        // Gemini API configuration
        const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=";
        const API_KEY = "";

        // Sample data for instructors
        const instructors = [
            { name: "Alice J.", skill: "Python", needs: "Graphic Design", description: "I can teach you Python fundamentals and backend development in exchange for graphic design tips.", imgText: "Py", isPremium: true, experience: "Expert", ratings: [5, 4, 5], endorsements: ["Web Development", "Data Science"], portfolio: ["Data Science Project", "Web Scraping Automation"], sessionCost: 100 },
            { name: "Bob K.", skill: "UI/UX Design", needs: "Photography", description: "Learn how to create user-friendly interfaces with Figma and Sketch in exchange for photography lessons.", imgText: "UI", isPremium: false, experience: "Intermediate", ratings: [4, 5], endorsements: ["User Interface", "Figma"], portfolio: ["Mobile App Mockups", "Web Redesign"], sessionCost: 100 },
            { name: "Charlie L.", skill: "Yoga", needs: "No skill needed", description: "A certified Yoga instructor offering beginner-friendly sessions.", imgText: "Yoga", isPremium: true, experience: "Expert", ratings: [5, 5, 5, 5], endorsements: ["Meditation", "Flexibility"], portfolio: ["RYT-200 Certification", "Yoga Retreats"], sessionCost: 100 },
            { name: "David M.", skill: "Photography", needs: "Python", description: "Tips and tricks for professional-level photography and editing in exchange for help with Python.", imgText: "Photo", isPremium: false, experience: "Beginner", ratings: [3], endorsements: ["Photo Editing"], portfolio: ["Landscape Portfolio", "Portraiture Workshop"], sessionCost: 100 },
            { name: "Eve N.", skill: "Python", needs: "No skill needed", description: "Expert in data science and machine learning using Python.", imgText: "Py", isPremium: true, experience: "Expert", ratings: [5, 5], endorsements: ["Machine Learning", "Data Analytics"], portfolio: ["AI Model Development", "Predictive Analytics"], sessionCost: 0 },
            { name: "Frank O.", skill: "UI/UX Design", needs: "Digital Marketing", description: "Product designer with a focus on mobile app experiences in exchange for help with digital marketing.", imgText: "UI", isPremium: false, experience: "Intermediate", ratings: [4], endorsements: ["User Experience"], portfolio: ["Case Study: E-commerce UI", "Prototype Videos"], sessionCost: 100 },
            { name: "Sarah T.", skill: "Group Python Fundamentals", needs: null, description: "A beginner-friendly group session covering the basics of Python.", imgText: "Py", isPremium: false, experience: "Intermediate", ratings: [4, 5], endorsements: ["Python Fundamentals", "Group Teaching"], portfolio: ["Python Cert", "Group Session Leader"], isGroup: true, groupSize: 5, currentMembers: 2, sessionCost: 100 },
            { name: "Mike D.", skill: "Group Yoga", needs: null, description: "Learn advanced yoga poses in a small group setting.", imgText: "Yoga", isPremium: true, experience: "Expert", ratings: [5], endorsements: ["Advanced Yoga"], portfolio: ["Yoga Alliance Cert"], isGroup: true, groupSize: 3, currentMembers: 1, sessionCost: 100 },
            {
                name: "Multi-Skill Swap Group",
                skill: "Yoga, C, C++",
                needs: null,
                description: "A collaborative group session where multiple skills are swapped. Person A teaches Yoga, Person B teaches C, and Person C teaches C++.",
                imgText: "Multi",
                isGroup: true,
                groupSize: 3,
                currentMembers: 3,
                sessionCost: 0,
                members: [
                    { name: "Person A", teaches: "Yoga", needs: ["C", "C++"] },
                    { name: "Person B", teaches: "C", needs: ["Yoga", "C++"] },
                    { name: "Person C", teaches: "C++", needs: ["Yoga", "C"] }
                ]
            }
        ];

        // Sample data for leaderboard
        const leaderboardData = [
            { name: "You", coins: 1245 },
            { name: "John Doe", coins: 1500 },
            { name: "Jane Smith", coins: 1450 },
            { name: "Sam Wilson", coins: 1320 },
            { name: "Emily White", coins: 1190 },
            { name: "Chris Evans", coins: 1080 },
        ];

        // Sample data for FAQ
        const faqData = [
            { question: "How do I earn coins?", answer: "You can earn coins by completing a skill swap, logging in daily, spinning the wheel, or by getting a referral bonus when you invite friends to the platform." },
            { question: "What is a 'session'?", answer: "A session is a single interaction between a learner and an instructor. It can be a chat, a voice call, or a video call, and counts towards your weekly limit." },
            { question: "How do I become a verified instructor?", answer: "To become a verified instructor, you need to complete at least 5 successful swaps with a rating of 4 stars or higher. Our team will then review your profile for the verified badge." },
            { question: "What if I don't have a skill to swap?", answer: "No problem! You can still book a session with an instructor by using coins. You can earn coins through gamified features like streaks and treasure boxes." }
        ];

        // Sample data for skill tests
        const skillTests = {
            "Python": [
                {
                    question: "What is the correct way to comment out multiple lines in Python?",
                    options: ["// This is a comment", "/* This is a comment */", "# This is a comment", "\"\"\"This is a comment\"\"\""],
                    answer: "\"\"\"This is a comment\"\"\""
                },
                {
                    question: "Which of these is a mutable data type in Python?",
                    options: ["tuple", "string", "list", "int"],
                    answer: "list"
                },
                {
                    question: "What does the 'pass' statement do in Python?",
                    options: ["It is a placeholder for future code", "It terminates a loop", "It defines a function", "It prints a message to the console"],
                    answer: "It is a placeholder for future code"
                }
            ],
            "Yoga": [
                 {
                    question: "What is 'Pranayama' in Yoga?",
                    options: ["A type of meditation", "A breathing exercise", "A standing pose", "A type of mantra"],
                    answer: "A breathing exercise"
                },
                {
                    question: "Which pose is known as 'Warrior II'?",
                    options: ["Virabhadrasana II", "Tadasana", "Adho Mukha Svanasana", "Bakasana"],
                    answer: "Virabhadrasana II"
                },
                {
                    question: "What is the primary purpose of a 'Savasana' at the end of a practice?",
                    options: ["To cool down and rest", "To strengthen the core", "To stretch the hamstrings", "To meditate"],
                    answer: "To cool down and rest"
                }
            ]
        };

        let currentRating = 0;
        let swapPartner = null;

        function updateDashboardStats() {
            document.getElementById('user-coins').textContent = userCoins;
            document.getElementById('rewards-coins-display').textContent = userCoins;
            document.getElementById('user-swaps').textContent = userSwaps;
        }

        function showPage(pageId) {
            document.querySelectorAll('.section-container').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });

            if (pageId === 'catalog') {
                renderInstructors('All');
            } else if (pageId === 'leaderboard') {
                renderLeaderboard();
            } else if (pageId === 'faq') {
                renderFaq();
            }
        }

        function showAuthModal() {
            document.getElementById('auth-modal').classList.remove('hidden');
        }

        function hideAuthModal() {
            document.getElementById('auth-modal').classList.add('hidden');
        }
        
        function showReportModal(instructorName) {
            document.getElementById('report-user-name').textContent = `Reporting: ${instructorName}`;
            document.getElementById('report-modal').classList.remove('hidden');
        }
        
        function hideReportModal() {
            document.getElementById('report-modal').classList.add('hidden');
        }

        document.getElementById('report-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const details = document.getElementById('report-details').value;
            const reportedUser = document.getElementById('report-user-name').textContent.replace('Reporting: ', '');
            console.log(`Report submitted for ${reportedUser}: ${details}`);
            hideReportModal();
            // In a real application, this is where you would send the report to a server
        });
        
        function showRateModal() {
            document.getElementById('rate-modal').classList.remove('hidden');
        }

        function hideRateModal() {
            document.getElementById('rate-modal').classList.add('hidden');
            currentRating = 0;
            updateStars();
        }

        function setRating(rating) {
            currentRating = rating;
            updateStars();
        }

        function updateStars() {
            const stars = document.getElementById('star-rating').children;
            for (let i = 0; i < stars.length; i++) {
                if (i < currentRating) {
                    stars[i].style.color = '#F59E0B'; // Tailwind yellow-500
                } else {
                    stars[i].style.color = '#D1D5DB'; // Tailwind gray-400
                }
            }
        }
        
        function submitRating() {
            if (currentRating > 0) {
                console.log(`User submitted a rating of ${currentRating} stars.`);
                hideRateModal();
                // In a real app, this data would be sent to the backend
            }
        }
        
        function showRewardsTab(tabId) {
            document.querySelectorAll('.rewards-tab').forEach(tab => {
                tab.classList.add('hidden');
            });
            document.getElementById(tabId + '-rewards-tab').classList.remove('hidden');
            
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active', 'text-indigo-600', 'border-indigo-600');
                button.classList.add('text-gray-600');
            });
            const activeButton = document.querySelector(`[onclick="showRewardsTab('${tabId}')']`);
            activeButton.classList.add('active', 'text-indigo-600', 'border-indigo-600');
            activeButton.classList.remove('text-gray-600');
        }
        
        function showHostModal() {
            document.getElementById('host-modal').classList.remove('hidden');
        }

        function hideHostModal() {
            document.getElementById('host-modal').classList.add('hidden');
        }

        document.getElementById('host-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const skill = document.getElementById('host-skill').value;
            const needs = document.getElementById('host-needs').value;
            const description = document.getElementById('host-description').value;
            
            if (skill && needs && description) {
                console.log(`New session created: Skill - ${skill}, Needs - ${needs}, Description - ${description}`);
                alert('Your session has been created! It will now appear in the catalog.');
                hideHostModal();
                // In a real application, this is where you would send the data to a server to be added to the database.
            } else {
                alert('Please fill out all fields to host a session.');
            }
        });

        function renderInstructors(skill) {
            const listContainer = document.getElementById('instructors-list');
            listContainer.innerHTML = ''; // Clear previous content

            const verifiedFilter = document.getElementById('verified-filter').checked;
            const experienceFilter = document.getElementById('experience-filter').value;
            
            let filteredInstructors = skill === 'All' ? instructors : instructors.filter(i => i.skill.includes(skill));

            if (verifiedFilter) {
                filteredInstructors = filteredInstructors.filter(i => i.isPremium);
            }

            if (experienceFilter) {
                filteredInstructors = filteredInstructors.filter(i => i.experience === experienceFilter);
            }


            filteredInstructors.forEach(instructor => {
                const isPremiumBadge = instructor.isPremium ? '<span class="absolute top-2 right-2 bg-yellow-400 text-yellow-900 text-xs font-bold py-1 px-2 rounded-full shadow-sm">‚úÖ Verified</span>' : '';
                const isGroupTag = instructor.isGroup ? '<span class="bg-indigo-200 text-indigo-800 text-xs font-bold py-1 px-2 rounded-full mt-2">Group Session</span>' : '';
                const buttonText = instructor.isGroup ? 'View Group' : 'View Profile';
                
                let needsDisplay = '';
                if (!instructor.isGroup) {
                    if (instructor.needs === "No skill needed") {
                        needsDisplay = 'Not looking for a swap';
                    } else {
                        needsDisplay = `In return for: <b>${instructor.needs}</b>`;
                    }
                }
                
                const instructorCard = document.createElement('div');
                instructorCard.className = 'bg-gray-50 rounded-2xl p-6 text-center shadow-md cursor-pointer transition transform hover:scale-105 relative';
                
                if (instructor.isGroup) {
                    instructorCard.onclick = () => renderGroupPage(instructor);
                } else {
                    instructorCard.onclick = () => renderProfile(instructor);
                }

                instructorCard.innerHTML = `
                    ${isPremiumBadge}
                    <img src="https://placehold.co/150x150/E2E8F0/1A202C?text=${instructor.imgText}" alt="${instructor.name}" class="mx-auto rounded-full mb-4 w-24 h-24 object-cover">
                    <h4 class="font-bold text-lg">${instructor.name}</h4>
                    <p class="text-sm text-gray-500 mb-2">Offering: <b>${instructor.skill}</b></p>
                    <p class="text-sm text-gray-500 mb-2">${needsDisplay}</p>
                    ${isGroupTag}
                    <button class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-full hover:bg-indigo-700 transition mt-4">${buttonText}</button>
                `;
                listContainer.appendChild(instructorCard);
            });
        }

        function renderMyProfile() {
            document.getElementById('profile-coins').textContent = userCoins;
            document.getElementById('profile-swaps').textContent = userSwaps;

            const certificatesList = document.getElementById('my-certificates-list');
            certificatesList.innerHTML = '';
            
            const noCertificatesMsg = document.getElementById('no-certificates-msg');
            
            if (userCertificates.length > 0) {
                 userCertificates.forEach(cert => {
                     const certCard = document.createElement('div');
                     certCard.className = 'certificate-card flex flex-col items-center text-center';
                     certCard.innerHTML = `
                         <p class="text-sm text-green-700 font-semibold mb-1">CERTIFICATE OF COMPLETION</p>
                         <h5 class="text-2xl font-bold text-indigo-700">${cert.skill}</h5>
                         <p class="text-sm text-gray-600 mt-2">Score: <span class="font-bold">${cert.score}%</span></p>
                         <button onclick="downloadCertificate('${cert.skill}', ${cert.score})" class="mt-4 bg-green-500 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-green-600 transition">Download</button>
                     `;
                     certificatesList.appendChild(certCard);
                 });
                 noCertificatesMsg.classList.add('hidden');
            } else {
                 noCertificatesMsg.classList.remove('hidden');
            }

            showPage('my-profile-page');
        }

        function renderProfile(instructor) {
            const profileContent = document.getElementById('profile-content');
            
            // Calculate average rating
            const averageRating = instructor.ratings.length > 0
                ? (instructor.ratings.reduce((sum, r) => sum + r, 0) / instructor.ratings.length).toFixed(1)
                : 'N/A';
            const starsHtml = averageRating !== 'N/A'
                ? Array(Math.round(averageRating)).fill('‚òÖ').join('') + Array(5 - Math.round(averageRating)).fill('‚òÜ').join('')
                : '';
            
            // Generate endorsements HTML
            const endorsementsHtml = instructor.endorsements.map(endorsement => `
                <span class="bg-gray-200 text-gray-700 text-sm font-semibold py-1 px-3 rounded-full">${endorsement}</span>
            `).join('');

            const portfolioHtml = instructor.portfolio.length > 0
                ? `<div class="bg-gray-50 rounded-xl p-4 mt-6">
                       <h4 class="text-xl font-bold mb-2">Skill Portfolio</h4>
                       <ul class="list-disc list-inside space-y-1 text-gray-600">
                           ${instructor.portfolio.map(item => `<li>${item}</li>`).join('')}
                       </ul>
                   </div>`
                : `<p class="text-gray-500 mt-4">No portfolio items available.</p>`;
            
            let actionButtonsHtml = '';
            let needsText = '';
            
            if(instructor.needs && instructor.needs !== 'No skill needed') {
                actionButtonsHtml = `
                    <button onclick="renderChatPage(instructors.find(i => i.name === '${instructor.name}'))" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition">Request Swap</button>
                    <button onclick="bookSession('${instructor.name}', 100)" class="bg-yellow-500 text-white font-bold py-3 px-8 rounded-full hover:bg-yellow-600 transition">Book Session (100 ü™ô)</button>
                `;
                needsText = `for <b>${instructor.needs}</b>`;
            } else {
                 actionButtonsHtml = `
                    <button onclick="bookSession('${instructor.name}', ${instructor.sessionCost})" class="bg-yellow-500 text-white font-bold py-3 px-8 rounded-full hover:bg-yellow-600 transition">
                        ${instructor.sessionCost === 0 ? 'Book Free Session' : `Book Session (${instructor.sessionCost} ü™ô)`}
                    </button>
                 `;
                 needsText = 'and is not looking for a swap';
            }

            profileContent.innerHTML = `
                <div class="flex flex-col md:flex-row items-center justify-center md:justify-start space-y-4 md:space-y-0 md:space-x-8">
                    <div class="relative">
                        <img src="https://placehold.co/150x150/E2E8F0/1A202C?text=${instructor.imgText}" alt="${instructor.name}" class="mx-auto rounded-full w-32 h-32 object-cover border-4 ${instructor.isPremium ? 'border-yellow-400' : 'border-gray-300'}">
                        ${instructor.isPremium ? '<span class="absolute bottom-0 right-0 -mr-2 bg-yellow-400 text-yellow-900 text-xs font-bold py-1 px-2 rounded-full shadow-sm">‚úÖ Verified</span>' : ''}
                    </div>
                    <div class="text-center md:text-left">
                        <h3 class="text-3xl font-bold">${instructor.name}</h3>
                        <p class="text-lg text-gray-600 mt-1">Offering <b>${instructor.skill}</b> ${needsText}</p>
                        <p class="text-sm text-gray-500 mt-2">Experience: ${instructor.experience}</p>
                    </div>
                </div>
                <div class="mt-6 text-center md:text-left">
                    <p class="text-lg font-bold">Average Rating:</p>
                    <div class="flex items-center justify-center md:justify-start space-x-2">
                        <span class="text-yellow-400 text-2xl">${starsHtml}</span>
                        <span class="text-xl font-semibold text-gray-800">${averageRating}</span>
                        <span class="text-gray-500">(${instructor.ratings.length} ratings)</span>
                    </div>
                </div>
                <div class="mt-6 text-center md:text-left">
                    <h4 class="text-xl font-bold mb-2">Endorsements</h4>
                    <div class="flex flex-wrap justify-center md:justify-start gap-2">
                        ${endorsementsHtml}
                        <button onclick="endorseSkill('${instructor.skill}')" class="bg-indigo-200 text-indigo-800 text-sm font-semibold py-1 px-3 rounded-full hover:bg-indigo-300 transition">
                            + Endorse Skill
                        </button>
                    </div>
                </div>
                <p class="mt-6 text-gray-700 text-center md:text-left">${instructor.description}</p>
                <div class="mt-8 flex flex-col md:flex-row justify-center md:justify-start space-y-4 md:space-y-0 md:space-x-4">
                    ${actionButtonsHtml}
                    <button onclick="showReportModal('${instructor.name}')" class="bg-red-500 text-white font-bold py-3 px-8 rounded-full hover:bg-red-600 transition">Report User</button>
                </div>
                ${portfolioHtml}
            `;
            showPage('profile-page');
        }

        function endorseSkill(skill) {
            alert(`You have endorsed this user for their ${skill} skill!`);
            // In a real app, this data would be sent to the backend
        }

        function renderGroupPage(group) {
            const groupContent = document.getElementById('group-content');
            
            const memberListHtml = group.members ? group.members.map(member => `
                <div class="bg-gray-50 rounded-xl p-4 flex items-center space-x-4 shadow-sm">
                    <img src="https://placehold.co/64x64/E2E8F0/1A202C?text=${member.teaches.charAt(0)}" alt="${member.name}" class="rounded-full w-16 h-16">
                    <div>
                        <h4 class="font-bold text-lg">${member.name}</h4>
                        <p class="text-sm text-gray-600">Teaches: <b>${member.teaches}</b></p>
                        <p class="text-sm text-gray-500">Needs: ${member.needs.join(', ')}</p>
                    </div>
                </div>
            `).join('') : '';

            const joinButtonText = group.sessionCost === 0 ? 'Join Free Group' : `Join Group Session (${group.sessionCost} ü™ô)`;
            
            groupContent.innerHTML = `
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold mb-2">${group.name}</h2>
                    <p class="text-lg text-gray-600">${group.description}</p>
                    <p class="text-sm text-gray-500 mt-2">Current Members: ${group.currentMembers} / ${group.groupSize}</p>
                </div>
                ${group.members ? `<div class="grid md:grid-cols-2 gap-4">${memberListHtml}</div>` : ''}
                <div class="mt-8 text-center">
                    <button onclick="joinGroup('${group.name}', ${group.sessionCost})" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition">
                        ${joinButtonText}
                    </button>
                    ${group.members ? `<button onclick="renderGroupChatPage(instructors.find(i => i.name === '${group.name}'))" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full hover:bg-indigo-700 transition">Start Group Chat</button>` : ''}
                </div>
            `;
            showPage('group-page');
        }

        function renderChatPage(otherUser) {
            const chatPartnerName = document.getElementById('chat-partner-name');
            const chatMessages = document.getElementById('chat-messages');
            const takeTestBtn = document.getElementById('take-test-btn');
            const lessonPlanBtn = document.getElementById('lesson-plan-btn');

            swapPartner = otherUser;
            currentInstructor = otherUser;
            chatPartnerName.textContent = otherUser.name;
            chatMessages.innerHTML = `
                <div class="flex justify-start">
                    <div class="bg-gray-200 text-gray-800 p-3 rounded-xl rounded-bl-none shadow-sm max-w-[80%]">
                        <p>Hey there! I saw your profile and would love to swap skills with you.</p>
                        <p class="text-xs text-right mt-1 text-gray-500">2:30 PM</p>
                    </div>
                </div>
                <div class="flex justify-end">
                    <div class="bg-indigo-600 text-white p-3 rounded-xl rounded-br-none shadow-sm max-w-[80%]">
                        <p>Hi! That's awesome. I'm excited to connect.</p>
                        <p class="text-xs text-right mt-1 text-indigo-200">2:31 PM</p>
                    </div>
                </div>
            `;
            
            takeTestBtn.style.display = 'none';
            lessonPlanBtn.style.display = 'inline-block';
            currentSkill = '';

            showPage('chat-page');
        }
        
        function renderGroupChatPage(group) {
            const chatPartnerName = document.getElementById('chat-partner-name');
            const chatMessages = document.getElementById('chat-messages');
            const takeTestBtn = document.getElementById('take-test-btn');
            const lessonPlanBtn = document.getElementById('lesson-plan-btn');

            swapPartner = null;
            currentGroup = group;
            currentInstructor = null; // No single instructor to focus on in a group
            chatPartnerName.textContent = group.name;

            const membersListHtml = group.members.map(member => `
                <div class="flex justify-between items-center bg-gray-100 rounded-lg p-2 mb-2">
                    <span>${member.name}</span>
                    <button onclick="showReportModal('${member.name}')" class="text-red-500 text-xs hover:underline">Report</button>
                </div>
            `).join('');

            chatMessages.innerHTML = `
                <div class="p-4 bg-gray-50 rounded-xl mb-4">
                    <h4 class="font-bold mb-2">Group Members:</h4>
                    ${membersListHtml}
                </div>
                <div class="flex justify-start">
                    <div class="bg-gray-200 text-gray-800 p-3 rounded-xl rounded-bl-none shadow-sm max-w-[80%]">
                        <p class="font-bold text-sm">Person A:</p>
                        <p>Welcome everyone! Let's get started with Yoga.</p>
                        <p class="text-xs text-right mt-1 text-gray-500">3:00 PM</p>
                    </div>
                </div>
            `;
            
            takeTestBtn.style.display = 'none';
            lessonPlanBtn.style.display = 'none';
            currentSkill = '';
            showPage('chat-page');
        }

        function completeSwap() {
            userSwaps++;
            userCoins += 50; // Add 50 coins for every completed swap
            updateDashboardStats();
            
            alert(`You completed a swap and earned 50 coins!`);

            if (userSwaps > 0 && userSwaps % 5 === 0) {
                showTreasureBoxModal();
            }

            // Show test button after a swap is completed
            const takeTestBtn = document.getElementById('take-test-btn');
            if (swapPartner && skillTests[swapPartner.skill]) {
                currentSkill = swapPartner.skill;
                takeTestBtn.style.display = 'block';
            }
        }

        function showTreasureBoxModal() {
            const coinsEarned = Math.floor(Math.random() * 21); // Random coins between 0 and 20
            userCoins += coinsEarned;
            document.getElementById('treasure-coins-display').textContent = coinsEarned;
            updateDashboardStats();
            document.getElementById('treasure-box-modal').classList.remove('hidden');
        }

        function hideTreasureBoxModal() {
            document.getElementById('treasure-box-modal').classList.add('hidden');
        }
        
        function showSpinWheelModal() {
            document.getElementById('spin-wheel-modal').classList.remove('hidden');
        }
        
        function hideSpinWheelModal() {
            document.getElementById('spin-wheel-modal').classList.add('hidden');
        }

        function spinTheWheel() {
            const prizes = ["100 coins", "25 coins", "50 coins", "10 coins", "5 coins"];
            const prize = prizes[Math.floor(Math.random() * prizes.length)];
            
            document.getElementById('spin-result').textContent = `You won ${prize}!`;
            
            // In a real app, this is where you'd update coins based on the prize
            if (prize.includes("coins")) {
                const coins = parseInt(prize.split(' ')[0]);
                userCoins += coins;
                updateDashboardStats();
            }
        }


        function bookSession(instructorName, cost) {
            console.log(`Booking a session with ${instructorName} for ${cost} coins.`);
            if (cost > 0) {
                 userCoins -= cost;
                 updateDashboardStats();
                 alert(`You have booked a session with ${instructorName} for ${cost} coins. Your coin balance is now ${userCoins}.`);
            } else {
                 alert(`You have booked a free session with ${instructorName}. Enjoy!`);
            }
        }
        
        function joinGroup(groupName, cost) {
            console.log(`Joining a group session with ${groupName}. Cost: ${cost} coins.`);
            if (cost > 0) {
                 userCoins -= cost;
                 updateDashboardStats();
                 alert(`You have requested to join the group session with ${groupName} for ${cost} coins. Your coin balance is now ${userCoins}.`);
            } else {
                 alert(`You have requested to join the free group session with ${groupName}.`);
            }
        }

        function renderLeaderboard() {
            const listContainer = document.getElementById('leaderboard-list');
            listContainer.innerHTML = '';
            
            // Sort data to ensure correct ranking
            const sortedData = [...leaderboardData].sort((a, b) => b.coins - a.coins);
            
            sortedData.forEach((user, index) => {
                const isCurrentUser = user.name === "You";
                const row = document.createElement('div');
                row.className = `flex justify-between items-center p-4 rounded-xl shadow-sm mb-2 ${isCurrentUser ? 'bg-indigo-100 text-indigo-800 font-bold' : 'bg-gray-50'}`;
                row.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <span class="text-lg w-8 text-center">${index + 1}</span>
                        <span class="font-semibold">${user.name}</span>
                    </div>
                    <span class="text-yellow-500 font-bold">${user.coins} ü™ô</span>
                `;
                listContainer.appendChild(row);
            });
        }
        
        function renderFaq() {
            const faqList = document.getElementById('faq-list');
            faqList.innerHTML = '';
            faqData.forEach((item, index) => {
                const faqItem = document.createElement('div');
                faqItem.className = 'accordion-item';
                faqItem.innerHTML = `
                    <div class="accordion-header" onclick="toggleAccordion(${index})">
                        <span>${item.question}</span>
                        <svg class="accordion-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div class="accordion-content">
                        <p>${item.answer}</p>
                    </div>
                `;
                faqList.appendChild(faqItem);
            });
        }

        function toggleAccordion(index) {
            const faqItem = document.getElementById('faq-list').children[index];
            const content = faqItem.querySelector('.accordion-content');
            if (faqItem.classList.contains('active')) {
                faqItem.classList.remove('active');
                content.style.display = 'none';
            } else {
                document.querySelectorAll('.accordion-item').forEach(item => {
                    item.classList.remove('active');
                    item.querySelector('.accordion-content').style.display = 'none';
                });
                faqItem.classList.add('active');
                content.style.display = 'block';
            }
        }
        
        function takeTest() {
            if (!currentSkill) return;

            const testData = skillTests[currentSkill];
            const testQuestionsContainer = document.getElementById('test-questions');
            testQuestionsContainer.innerHTML = '';
            document.getElementById('test-skill-name').textContent = currentSkill;

            testData.forEach((q, index) => {
                const questionHtml = `
                    <div class="bg-gray-50 rounded-xl p-6 shadow-sm">
                        <p class="font-semibold text-lg mb-4">Q${index + 1}: ${q.question}</p>
                        <div class="space-y-2">
                            ${q.options.map((option, i) => `
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="question-${index}" value="${option}" class="text-indigo-600 focus:ring-indigo-500">
                                    <span>${option}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
                testQuestionsContainer.innerHTML += questionHtml;
            });
            showPage('test-page');
        }

        function submitTest() {
            const testData = skillTests[currentSkill];
            let correctAnswers = 0;

            testData.forEach((q, index) => {
                const selectedOption = document.querySelector(`input[name="question-${index}"]:checked`);
                if (selectedOption && selectedOption.value === q.answer) {
                    correctAnswers++;
                }
            });

            const score = (correctAnswers / testData.length) * 100;

            userCertificates.push({
                skill: currentSkill,
                score: score.toFixed(0)
            });
            
            document.getElementById('certificate-skill-name').textContent = currentSkill;
            document.getElementById('certificate-score').textContent = score.toFixed(0);

            showPage('certificate-page');
        }
        
        function downloadCertificate(skill, score) {
            alert(`Simulating download for certificate in ${skill} with a score of ${score}%.`);
            console.log(`Downloading certificate for ${skill} with score ${score}.`);
        }

        function setTheme(themeName) {
            document.body.className = `bg-gray-100 text-gray-800 theme-${themeName}`;
        }
        
        async function getNewMissionIdea() {
            document.getElementById('mission-idea-modal').classList.remove('hidden');
            const contentDiv = document.getElementById('mission-idea-content');
            contentDiv.innerHTML = `
                <div class="py-10">
                    <svg class="animate-spin h-8 w-8 text-purple-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-4 text-gray-500">Generating idea...</p>
                </div>
            `;
            try {
                const systemPrompt = "You are a creative project manager for a skill-swapping platform. Your goal is to suggest a small, engaging, and beginner-friendly project idea to help a user learn a new skill. The idea should be concise, fun, and easy to complete in a single session. Only provide the project idea, no additional text or greetings.";
                const userQuery = "Suggest a small, creative project for learning a skill.";

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    }
                };
                
                const response = await fetch(API_URL + API_KEY, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const idea = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                contentDiv.innerHTML = `<p class="text-xl font-semibold">${idea}</p>`;
            } catch (error) {
                console.error("Error generating mission idea:", error);
                contentDiv.innerHTML = `<p class="text-red-500">Failed to generate mission idea. Please try again.</p>`;
            }
        }

        function hideMissionIdeaModal() {
            document.getElementById('mission-idea-modal').classList.add('hidden');
        }

        async function showLessonPlanModal() {
            document.getElementById('lesson-plan-modal').classList.remove('hidden');
            const lessonPlanContent = document.getElementById('lesson-plan-content');
            
            const instructorSkill = currentInstructor.skill;
            
            lessonPlanContent.innerHTML = `
                <div class="text-center py-10">
                    <svg class="animate-spin h-8 w-8 text-indigo-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-4 text-gray-500">Generating lesson plan for ${instructorSkill}...</p>
                </div>
            `;
            
            try {
                const systemPrompt = `You are a world-class instructor and expert in various skills. Your task is to generate a comprehensive, structured lesson plan for a skill requested by a student. The plan should be easy to follow and include sections like "Introduction," "Core Concepts," "Practical Exercises," and "Next Steps." Use markdown formatting to make it easy to read.`;
                const userQuery = `Create a lesson plan for learning ${instructorSkill}. Make it suitable for a beginner.`;
                
                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    }
                };

                const response = await fetch(API_URL + API_KEY, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const lessonPlan = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (lessonPlan) {
                    lessonPlanContent.innerHTML = `<div class="prose max-w-none text-gray-800">${lessonPlan}</div>`;
                } else {
                    lessonPlanContent.innerHTML = `<p class="text-red-500 text-center">Failed to generate lesson plan. Please try again.</p>`;
                }
            } catch (error) {
                console.error("Error generating lesson plan:", error);
                lessonPlanContent.innerHTML = `<p class="text-red-500 text-center">Failed to generate lesson plan. Please try again.</p>`;
            }
        }

        function hideLessonPlanModal() {
            document.getElementById('lesson-plan-modal').classList.add('hidden');
        }


        // Initialize with the home page
        window.onload = () => {
            updateDashboardStats();
            showPage('home');
        };
    </script>
</body>
</html>
